(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{zVZC:function(e,t,n){"use strict";n.r(t);var a=n("nQlP"),o={name:"PageLoader",props:{isShow:{type:Boolean,default:!1}}},s=n("KHd+"),r=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pageloader",class:{"is-active":e.isShow}},[n("span",{staticClass:"title"},[e._v("Loading")])])}),[],!1,null,null,null).exports,i=n("0mjZ"),l=n("2hZb"),c=n("ZQ6A"),d={name:"DateInput",data:function(){return{date:null,attributes:[{key:"today",bar:!0,dates:new Date}]}},props:{dateName:{type:String,default:"Date"},description:{type:String,default:""},inputValue:{type:[Date,String],default:null}},watch:{date:function(e){this.$refs.datepicker.updateValue(e),this.$emit("changed",this.formatDate(e,"yyyy/MM/dd"))},inputValue:function(e){null!=e&&0!=e.lengh?(this.date=new Date(e),this.inputValue=this.formatDate(e,"yyyy/MM/dd")):this.date=null}}},u=Object(s.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("date-picker",{ref:"datepicker",attrs:{mode:"single",attributes:e.attributes,popover:{visibility:"click"}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.updateValue;return n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("\n\t\t\t"+e._s(e.dateName)+"\n\t\t")]),e._v(" "),n("div",{staticClass:"control has-icons-left"},[n("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:e.inputValue},on:{input:function(e){return a(e.target.value)},change:function(e){return a(e.target.value)}}}),e._v(" "),n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"fas fa-calendar"})])]),e._v(" "),""!=e.description?n("p",{staticClass:"help"},[e._v(e._s(e.description))]):e._e()])}}]),model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})}),[],!1,null,null,null).exports;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={name:"Main",components:{NavBar:a.a,PageLoader:r,BoxModal:i.a,ConfirmModal:l.a,CardModal:c.a,DateInput:u},data:function(){return{newCategoryName:"",newSubcategoryName:"",newInventory:{categoryId:"",subcategoryId:"",name:"",amount:null,unitPrice:null,brand:null,buyDate:null,remarks:"",blackItem:!1,picture:null,file:null},newInventoryError:!1,addSubcategoryFromInventory:!1,uploaderValue:0,picPlaceholder:"https://bulma.io/images/placeholders/256x256.png",fileChanged:!1}},computed:{isShowLoading:function(){return this.$store.getters.showLoading},isShowAddCateModal:function(){return this.$store.getters.isShowAddCateModal},isShowNewSubcateModal:function(){return this.$store.getters.isShowNewSubcateModal},newSubcategoryData:function(){return this.$store.getters.newSubcategoryData},isShowDeleteCateModal:function(){return this.$store.getters.isShowDeleteCateModal},isShowDeleteSubCateModal:function(){return this.$store.getters.isShowDeleteSubCateModal},deleteCategoryData:function(){return this.$store.getters.deleteCategoryData},deleteSubCategoryData:function(){return this.$store.getters.deleteSubCategoryData},isShowAddInventoryModal:function(){return this.$store.getters.isShowAddInventoryModal},categoryList:function(){return this.$store.getters.categoryList},subcategoryList:function(){return this.$store.getters.subCategoryList},isEditInventory:function(){return this.$store.getters.isEditInventory},editInventoryId:function(){return this.$store.getters.editInventoryId},inventoryData:function(){return this.$store.getters.inventoryData},isShowDeleteInventoryModal:function(){return this.$store.getters.isShowDeleteInventoryModal}},watch:{isShowAddInventoryModal:function(e){var t=this;e?(this.getCategoryList(),this.isEditInventory&&this.$store.dispatch("getInventory",this.editInventoryId).then((function(){t.getSubCategoryList(t.inventoryData.categoryId),t.newInventory=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.inventoryData)}))):(this.newInventory={categoryId:"",subcategoryId:"",name:"",amount:null,unitPrice:null,brand:null,buyDate:null,remarks:"",blackItem:!1,picture:this.picPlaceholder,file:null},this.$store.commit("setSubCategoryList",[]),this.newInventoryError=!1)},isShowAddCateModal:function(e){e||(this.newCategoryName="")},isShowNewSubcateModal:function(e){e||(this.newSubcategoryName="")}},methods:{onCancelModal:function(e){this.$refs[e].show=!1},checkRequireInventory:function(){return 0===this.newInventory.categoryId.length||0===this.newInventory.name.length?(this.newInventoryError=!0,this.$store.dispatch("setAlertMessage",{status:!1,message:"Please select category and input inventory name!"}),!1):(this.newInventoryError=!1,!0)},newCategory:function(){var e=this;0!==this.newCategoryName.length?this.$store.dispatch("newCategory",this.newCategoryName).then((function(){return e.$store.commit("setIsShowAddCateModal",!1)})):this.$store.dispatch("setAlertMessage",{status:!1,message:"Please input category name!"})},addSubcategory:function(){var e=this;if(0!==this.newSubcategoryName.length){var t=this.newSubcategoryName,n=this.addSubcategoryFromInventory?this.newInventory.categoryId:this.newSubcategoryData.categoryId;this.$store.dispatch("addSubcategory",{subcategoryName:t,categoryId:n}).then((function(){return e.$store.commit("setIsShowNewSubcateModal",!1)}))}else this.$store.dispatch("setAlertMessage",{status:!1,message:"Please input subcategory name!"})},deleteCategory:function(){var e=this;this.$store.dispatch("deleteCategory",this.deleteCategoryData.categoryId).then((function(){return e.$store.commit("setIsShowDeleteCateModal",!1)}))},deleteSubCategory:function(){var e=this;this.$store.dispatch("deleteSubCategory",this.deleteSubCategoryData.subcategoryId).then((function(){return e.$store.commit("setIsShowDeleteSubCateModal",!1)}))},addInventory:function(){var e=this;if(this.checkRequireInventory())if(this.isEditInventory){this.fileChanged&&this.$store.dispatch("uploadInventoryFile",this.newInventory.file);var t={inventoryId:this.editInventoryId,data:this.newInventory};this.$store.dispatch("editInventory",t).then((function(){return e.$store.commit("setIsShowAddInventoryModal",!1)}))}else this.$store.dispatch("uploadInventoryFile",this.newInventory.file),this.$store.dispatch("newInventory",this.newInventory).then((function(){return e.$store.commit("setIsShowAddInventoryModal",!1)}))},deleteInventory:function(){var e=this;this.$store.dispatch("deleteInventory",this.editInventoryId).then((function(){e.$store.commit("setIsShowDeleteInventoryModal",!1),e.$store.commit("setIsShowAddInventoryModal",!1)}))},getCategoryList:function(){this.$store.dispatch("getCategoryList")},getSubCategoryList:function(e){this.$store.dispatch("getSubcategoryList",e)},onChangeCategory:function(e){this.newInventory.categoryId=e.target.value,this.getSubCategoryList(e.target.value)},onChangeFileInput:function(e){this.fileChanged=!0;var t=e.target.files[0];document.getElementById("new-inventory-pic").src=window.URL.createObjectURL(t),this.newInventory.file={fileObject:t,fileName:t.name}},getBuyDate:function(e){this.newInventory.buyDate=e}},mounted:function(){this.$store.commit("setIsShowAddCateModal",!1),this.$store.commit("setIsShowNewSubcateModal",!1),this.$store.commit("setIsShowDeleteCateModal",!1),this.$store.commit("setIsShowDeleteSubCateModal",!1),this.$store.commit("setIsShowAddInventoryModal",!1),this.$store.commit("setIsEditInventory",!1),this.$store.commit("setIsShowDeleteInventoryModal",!1)}},g=Object(s.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"is-fullheight"},[n("nav-bar"),e._v(" "),n("div",{staticClass:"hero-body main-content"},[n("div",{staticClass:"container"},[n("transition",{attrs:{mode:"out-in","enter-active-class":"fadeIn","leave-active-class":"fadeOut",appear:""}},[n("router-view",{staticClass:"animated"})],1)],1),e._v(" "),n("box-modal",{ref:"modal-add-category",attrs:{id:"modal-add-category","is-show-modal":e.isShowAddCateModal},scopedSlots:e._u([{key:"content",fn:function(){return[n("h5",[e._v("Add a new category")]),e._v(" "),n("hr"),e._v(" "),n("form",{on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"field"},[n("p",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newCategoryName,expression:"newCategoryName",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"category name"},domProps:{value:e.newCategoryName},on:{input:function(t){t.target.composing||(e.newCategoryName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"field is-grouped is-grouped-right"},[n("p",{staticClass:"control"},[n("a",{staticClass:"button is-light",on:{click:function(t){e.$store.commit("setIsShowAddCateModal",!1),e.onCancelModal("modal-add-category")}}},[e._v("Cancel")])]),e._v(" "),n("p",{staticClass:"control"},[n("a",{staticClass:"button is-primary",on:{click:e.newCategory}},[e._v("Add")])])])]},proxy:!0}])}),e._v(" "),n("box-modal",{ref:"modal-add-subcategory",attrs:{id:"modal-add-subcategory","is-show-modal":e.isShowNewSubcateModal},scopedSlots:e._u([{key:"content",fn:function(){return[e.addSubcategoryFromInventory?n("h5",[e._v("Add a new subcategory")]):n("h5",[e._v('Add a new subcategory under "'+e._s(e.newSubcategoryData.categoryName)+'"')]),e._v(" "),n("hr"),e._v(" "),n("form",{on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"field"},[n("p",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newSubcategoryName,expression:"newSubcategoryName",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"subcategory name"},domProps:{value:e.newSubcategoryName},on:{input:function(t){t.target.composing||(e.newSubcategoryName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"field is-grouped is-grouped-right"},[n("p",{staticClass:"control"},[n("a",{staticClass:"button is-light",on:{click:function(t){e.$store.commit("setIsShowNewSubcateModal",!1),e.onCancelModal("modal-add-subcategory")}}},[e._v("Cancel")])]),e._v(" "),n("p",{staticClass:"control"},[n("a",{staticClass:"button is-primary",on:{click:e.addSubcategory}},[e._v(e._s(e.isEditInventory?"Save":"Add"))])])])]},proxy:!0}])}),e._v(" "),n("confirm-modal",{ref:"modal-delete-category",attrs:{id:"modal-delete-category","is-show-modal":e.isShowDeleteCateModal,message:"You sure you want to delete '"+e.deleteCategoryData.categoryName+"' and it's subcategories ?","is-danger":!0,"confirm-btn-name":"Delete"},on:{confirm:e.deleteCategory,cancel:function(t){e.$store.commit("setIsShowDeleteCateModal",!1),e.onCancelModal("modal-delete-category")}}}),e._v(" "),n("confirm-modal",{ref:"modal-delete-subcategory",attrs:{id:"modal-delete-subcategory","is-show-modal":e.isShowDeleteSubCateModal,message:"You sure you want to delete '"+e.deleteSubCategoryData.subcategoryName+"'?","is-danger":!0,"confirm-btn-name":"Delete"},on:{confirm:e.deleteSubCategory,cancel:function(t){e.$store.commit("setIsShowDeleteSubCateModal",!1),e.onCancelModal("modal-delete-subcategory")}}}),e._v(" "),n("card-modal",{ref:"modal-add-inventory",attrs:{id:"modal-add-inventory","is-show-modal":e.isShowAddInventoryModal,title:e.isEditInventory?"Edit":"Add a item","confirm-btn-name":e.isEditInventory?"Save":"Add"},on:{cancel:function(t){e.$store.commit("setIsShowAddInventoryModal",!1),e.$store.commit("setIsEditInventory",!1),e.onCancelModal("modal-add-inventory")},confirm:e.addInventory},scopedSlots:e._u([{key:"modal-content",fn:function(){return[n("figure",{staticClass:"snip"},[n("div",{staticClass:"item-image"},[n("img",{attrs:{id:"new-inventory-pic",src:null==e.newInventory.picture?e.picPlaceholder:e.newInventory.picture,alt:"item photo"}})]),e._v(" "),n("div",{staticClass:"file",staticStyle:{"justify-content":"center"}},[n("label",{staticClass:"file-label"},[n("input",{ref:"image",staticClass:"file-input",attrs:{type:"file",accept:".png, .jpeg, .jpg"},on:{change:e.onChangeFileInput}}),e._v(" "),n("span",{staticClass:"file-cta"},[n("span",{staticClass:"file-icon"},[n("i",{staticClass:"fas fa-upload"})]),e._v(" "),n("span",{staticClass:"file-label"},[e._v("Upload")])])])]),e._v(" "),n("figcaption",[e.isEditInventory?n("div",{staticClass:"field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newInventory.blackItem,expression:"newInventory.blackItem"}],staticClass:"switch is-rounded is-danger",attrs:{id:"switchRoundedDanger",type:"checkbox",name:"switchRoundedDanger"},domProps:{checked:Array.isArray(e.newInventory.blackItem)?e._i(e.newInventory.blackItem,null)>-1:e.newInventory.blackItem},on:{change:function(t){var n=e.newInventory.blackItem,a=t.target,o=!!a.checked;if(Array.isArray(n)){var s=e._i(n,null);a.checked?s<0&&e.$set(e.newInventory,"blackItem",n.concat([null])):s>-1&&e.$set(e.newInventory,"blackItem",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(e.newInventory,"blackItem",o)}}}),e._v(" "),n("label",{attrs:{for:"switchRoundedDanger"}},[e._v("Black list")])]):e._e(),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Category")]),e._v(" "),n("div",{staticClass:"control"},[n("div",{staticClass:"select is-fullwidth",class:{"is-danger":e.newInventoryError}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.newInventory.categoryId,expression:"newInventory.categoryId"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.newInventory,"categoryId",t.target.multiple?n:n[0])},e.onChangeCategory]}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Please select")]),e._v(" "),e._l(e.categoryList,(function(t){return[n("option",{key:t.id,domProps:{value:t.id,selected:t.id==e.newInventory.categoryId}},[e._v(e._s(t.name))])]}))],2)])]),e._v(" "),n("span",[n("a",{staticClass:"is-link",on:{click:function(t){e.$store.commit("setIsShowAddCateModal",!0),e.$store.commit("setIsShowAddInventoryModal",!1)}}},[e._v("Add category...")])])]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Subcategory")]),e._v(" "),n("div",{staticClass:"control"},[n("div",{staticClass:"select is-fullwidth"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.newInventory.subcategoryId,expression:"newInventory.subcategoryId"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.newInventory,"subcategoryId",t.target.multiple?n:n[0])}}},[0==e.subcategoryList.length?n("option",{attrs:{value:"",selected:""}},[e._v("No subcategory")]):n("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("Please select subcategory")]),e._v(" "),e._l(e.subcategoryList,(function(t){return[n("option",{key:t.id,domProps:{value:t.id,selected:t.id==e.newInventory.subcategoryId}},[e._v(e._s(t.name))])]}))],2)])]),e._v(" "),""!=e.newInventory.categoryId&&0==e.subcategoryList.length?n("span",[n("a",{staticClass:"is-link",on:{click:function(t){e.$store.commit("setIsShowNewSubcateModal",!0),e.$store.commit("setIsShowAddInventoryModal",!1),e.addSubcategoryFromInventory=!0}}},[e._v("Add subcategory...")])]):e._e()]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Name")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newInventory.name,expression:"newInventory.name",modifiers:{trim:!0}}],staticClass:"input",class:{"is-danger":e.newInventoryError},attrs:{type:"text",placeholder:"name"},domProps:{value:e.newInventory.name},on:{input:function(t){t.target.composing||e.$set(e.newInventory,"name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Brand")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newInventory.brand,expression:"newInventory.brand",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. Gucci, Prada"},domProps:{value:e.newInventory.brand},on:{input:function(t){t.target.composing||e.$set(e.newInventory,"brand",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"field-body is-grouped is-horizontal"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Amount")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.newInventory.amount,expression:"newInventory.amount",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"10",min:"0"},domProps:{value:e.newInventory.amount},on:{input:function(t){t.target.composing||e.$set(e.newInventory,"amount",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Unit price")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.newInventory.unitPrice,expression:"newInventory.unitPrice",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"10",min:"1"},domProps:{value:e.newInventory.unitPrice},on:{input:function(t){t.target.composing||e.$set(e.newInventory,"unitPrice",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])])]),e._v(" "),n("date-input",{attrs:{"input-value":e.newInventory.buyDate,"date-name":"Buy Date"},on:{changed:e.getBuyDate}}),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("Remarks")]),e._v(" "),n("div",{staticClass:"control"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newInventory.remarks,expression:"newInventory.remarks"}],staticClass:"textarea",attrs:{placeholder:"Remark here"},domProps:{value:e.newInventory.remarks},on:{input:function(t){t.target.composing||e.$set(e.newInventory,"remarks",t.target.value)}}})])])],1),e._v(" "),e.isEditInventory?n("div",{staticClass:"field mt-5"},[n("button",{staticClass:"button is-danger",on:{click:function(t){return e.$store.commit("setIsShowDeleteInventoryModal",!0)}}},[n("i",{staticClass:"fas fa-times"}),e._v(" Delete this item\n\t\t\t\t\t\t")])]):e._e()])]},proxy:!0}])}),e._v(" "),n("confirm-modal",{ref:"modal-delete-inventory",attrs:{id:"modal-delete-inventory","is-show-modal":e.isShowDeleteInventoryModal,message:"You sure you want to delete '"+e.newInventory.name+"'?","is-danger":!0,"confirm-btn-name":"Delete"},on:{confirm:e.deleteInventory,cancel:function(t){e.$store.commit("setIsShowDeleteInventoryModal",!1),e.onCancelModal("modal-delete-inventory")}}})],1),e._v(" "),n("page-loader",{attrs:{"is-show":e.isShowLoading}})],1)}),[],!1,null,null,null);t.default=g.exports}}]);